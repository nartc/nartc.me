---
import BlogList from "../components/BlogList.astro";
import Layout from "../layouts/Layout.astro";
import type { Frontmatter } from "../models/frontmatter";
import { byDate } from "../utils/sort-by-date";

const globs = await Astro.glob<{ frontmatter: Frontmatter }>(
    "../blogs/*.{md,mdx}",
);

const blogs = [];

for (const glob of globs) {
    if (glob.frontmatter.draft && import.meta.env.PROD) {
        continue;
    }
    blogs.push(glob.frontmatter);
}

blogs.sort(byDate);
---

<Layout title="Chau Tran">
    <BlogList blogs={blogs} />
</Layout>
